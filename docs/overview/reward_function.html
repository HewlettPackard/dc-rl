<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>Reward function - SustainDC 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SustainDC 0.0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SustainDC 0.0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="index.html">Overview</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Overview</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="workload.html">Workload Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="datacenter.html">Data Center Environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../code/index.html">Code</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Code</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../code/folder_structure.html">Folder Structure</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../code/modules.html">Class and member documentation</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Class and member documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../code/create_trainable.html">create_trainable module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/data.html">Data package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/dcrl_env.html">dcrl_env module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/dcrl_eplus_env.html">dcrl_eplus_env module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/envs.html">envs package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/maddpg.html">maddpg module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/train.html">train module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/train_a2c.html">train_a2c module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/train_maddpg.html">train_maddpg module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/train_ppo.html">train_ppo module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code/utils.html">utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../train_evaluate/index.html">Train and Evaluate Statistics</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Train and Evaluate Statistics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../train_evaluate/monitor_results.html">How to Monitor Training Results Using TensorBoard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../train_evaluate/monitor_results.html#how-to-add-custom-metrics">How to add Custom Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../train_evaluate/evaluate.html">How to evaluate DCRL-Green model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribution_guidelines.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/overview/reward_function.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="reward-function">
<h1>Reward function<a class="headerlink" href="#reward-function" title="Link to this heading">¶</a></h1>
<p>DCRL-Green provides an interface where the end-user can choose to train three agents independently of each other’s reward feedback, or consider a collaborative reward approach.</p>
<section id="independent-rewards">
<h2>Independent rewards<a class="headerlink" href="#independent-rewards" title="Link to this heading">¶</a></h2>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Agent</p></th>
<th class="head"><p>Default Reward</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>agent_ls</p></td>
<td><div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[r_{ls}~ =~  -(Penalty \cdot UL)-(CI \cdot Total EC) \]</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>agent_dc</p></td>
<td><div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[r_{dc} ~=~ -( Total EC) \]</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>agent_bat</p></td>
<td><div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[r_{bat}~ =~ -(CI \cdot  Total EC) \]</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>Total EC refers to the total building energy consumption (HVAC+IT), CI is the carbon intensity in the power grid indicating the inverse of the availability of green energy, and UL refers to the amount of unassigned flexible computational workload.
A penalty is attributed to the load shifting agent if it fails to schedule all the required load within the time horizon N.</p>
</section>
<section id="collaborative-rewards">
<h2>Collaborative rewards<a class="headerlink" href="#collaborative-rewards" title="Link to this heading">¶</a></h2>
<p>The reward-sharing mechanism allows the agents to estimate the feedback from their actions in other environments. Users have an option to choose the level of colaboration between the agents. This can be done by specifying the <span class="math notranslate nohighlight">\(\eta\)</span> value in the script.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Agent</p></th>
<th class="head"><p>Reward</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>agent_ls</p></td>
<td><div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\eta \cdot r_{ls} + (1-\eta) /2 \cdot r_{dc} + (1-\eta)/2 \cdot r_{bat}\]</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>agent_dc</p></td>
<td><div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(1-\eta) /2 \cdot r_{ls} + \eta \cdot r_{dc} + (1-\eta)/2 \cdot r_{bat}\]</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>agent_bat</p></td>
<td><div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(1-\eta) /2 \cdot r_{ls} + (1-\eta)/2 \cdot r_{dc} + \eta \cdot r_{bat}\]</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>Example <span class="math notranslate nohighlight">\(\eta\)</span> values to set up a collaborative, independent and custom weighted environment are given in the table below. The higher the value of <span class="math notranslate nohighlight">\(\eta\)</span>, the less collaboration between the agents in the environment.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Reward Scheme</p></th>
<th class="head"><p>Implementation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Collaborative</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;individual_reward_weight&#39;</span>:<span class="w"> </span><span class="m">0</span>.33
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Independent</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;individual_reward_weight&#39;</span>:<span class="w"> </span><span class="m">1</span>.0
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Default
(weighted)</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;individual_reward_weight&#39;</span>:<span class="w"> </span><span class="m">0</span>.8
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="custom-rewards">
<h2>Custom rewards<a class="headerlink" href="#custom-rewards" title="Link to this heading">¶</a></h2>
<p>DCRL-Green inludes an option to include custom rewards to match user’s optimization objectives.</p>
<p><strong>Step 1:</strong>
Users need to define custom reward functions in <code class="code docutils literal notranslate"><span class="pre">utils/reward_creator.py</span></code>. Those function should follow the schema:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">custom_agent_reward</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="c1">#read reward input parameters from dict object</span>
    <span class="c1">#custom reward calculations</span>
    <span class="n">custom_reward</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1">#update with custom reward shaping</span>
    <span class="k">return</span> <span class="n">custom_reward</span>
</pre></div>
</div>
<p><strong>Step 2:</strong>
Next, users need to add the new custom reward function(s) to the <code class="code docutils literal notranslate"><span class="pre">REWARD_METHOD_MAP</span></code> dictionary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">REWARD_METHOD_MAP</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;default_dc_reward&#39;</span> <span class="p">:</span> <span class="n">default_dc_reward</span><span class="p">,</span>
<span class="s1">&#39;default_bat_reward&#39;</span><span class="p">:</span> <span class="n">default_bat_reward</span><span class="p">,</span>
<span class="s1">&#39;default_ls_reward&#39;</span> <span class="p">:</span> <span class="n">default_ls_reward</span><span class="p">,</span>
<span class="c1"># Additional rewards methods</span>
<span class="s1">&#39;tou_reward&#39;</span> <span class="p">:</span> <span class="n">tou_reward</span><span class="p">,</span>
<span class="s1">&#39;renewable_energy_reward&#39;</span> <span class="p">:</span> <span class="n">renewable_energy_reward</span><span class="p">,</span>
<span class="s1">&#39;energy_efficiency_reward&#39;</span> <span class="p">:</span> <span class="n">energy_efficiency_reward</span><span class="p">,</span>
<span class="s1">&#39;energy_PUE_reward&#39;</span> <span class="p">:</span> <span class="n">energy_PUE_reward</span><span class="p">,</span>
<span class="s1">&#39;temperature_efficiency_reward&#39;</span> <span class="p">:</span> <span class="n">temperature_efficiency_reward</span><span class="p">,</span>
<span class="c1"># Add custom reward methods here</span>
<span class="s1">&#39;custom_agent_reward&#39;</span> <span class="p">:</span> <span class="n">custom_agent_reward</span><span class="p">,</span>
<span class="s1">&#39;how_you_want_to_call_it&#39;</span> <span class="p">:</span> <span class="n">how_is_the_function_called</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A dictionary of the environment parameters (<code class="code docutils literal notranslate"><span class="pre">reward_params</span></code>) is available to users in <code class="code docutils literal notranslate"><span class="pre">dcrl_env.py</span></code> or <code class="code docutils literal notranslate"><span class="pre">dcrl_eplus_env.py</span></code>.
This object consists of the information dictionary of each environment, and some other global variables such as time, day, carbon intensity, outside temperature, etc.
If a user wants to add additional custom parameters, they must be added in the dictionary <code class="code docutils literal notranslate"><span class="pre">reward_params</span></code> so that those variables are visible in the reward function.
Within the dictionary, the following environment parameters are available to users:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_action</span></code></p></td>
<td><p>0</p></td>
<td><p>Action of the battery agent</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_SOC</span></code></p></td>
<td><p>0.15</p></td>
<td><p>Battery state of charge</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_CO2_footprint</span></code></p></td>
<td><p>380899.11</p></td>
<td><p>CO2 footprint obtained after the battery action</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_avg_CI</span></code></p></td>
<td><p>500.63</p></td>
<td><p>Carbon Intensity used in battery (same as current CI)</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_total_energy_without_battery_KWh</span></code></p></td>
<td><p>610.82</p></td>
<td><p>Total energy (KWh) consumed before battery action</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_total_energy_with_battery_KWh</span></code></p></td>
<td><p>760.82</p></td>
<td><p>Total energy (KWh) consumed after battery action</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_max_bat_cap</span></code></p></td>
<td><p>2</p></td>
<td><p>Battery maximum capacity (KWh)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_a_t</span></code></p></td>
<td><p>charge</p></td>
<td><p>Name of the action of the battery agent</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_dcload_min</span></code></p></td>
<td><p>0.6</p></td>
<td><p>Datacenter minimal energy consumption (MWh). Used in normalization.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">bat_dcload_max</span></code></p></td>
<td><p>1.81</p></td>
<td><p>Datacenter maximal energy consumption (MWh). Used in normalization.</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">ls_original_workload</span></code></p></td>
<td><p>0.69</p></td>
<td><p>Normalized original workload (%) before load shifting agent</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">ls_shifted_workload</span></code></p></td>
<td><p>0.69</p></td>
<td><p>Normalized shifted workload (%) after load shifting agent</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">ls_action</span></code></p></td>
<td><p>1</p></td>
<td><p>Action of the load shifting agent</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">ls_norm_load_left</span></code></p></td>
<td><p>1</p></td>
<td><p>Normalized current unassigned flexible workload</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">ls_unasigned_day_load_left</span></code></p></td>
<td><p>0</p></td>
<td><p>Total end of the day unassigned flexible workload</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">ls_penalty_flag</span></code></p></td>
<td><p>FALSE</p></td>
<td><p>Flag to indicate that at the end of the day, there is some workload unassigned.</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_ITE_total_power_kW</span></code></p></td>
<td><p>2443.31</p></td>
<td><p>IT total power consumption (KW)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_HVAC_total_power_kW</span></code></p></td>
<td><p>0</p></td>
<td><p>HVAC total power consumption (KW). It doesn’t consider the CRAC fan load, CRAC cooling load, or the compressor load because these have constant  power consumption.</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_total_power_kW</span></code></p></td>
<td><p>2443.31</p></td>
<td><p>Total power consumption (KW)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_energy_lb_kW</span></code></p></td>
<td><p>40000</p></td>
<td><p>Lower bound in the normalization of the datacenter energy consumption (W)</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_energy_ub_kW</span></code></p></td>
<td><p>160000</p></td>
<td><p>Upper bound in the normalization of the datacenter energy consumption (W)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_crac_setpoint_delta</span></code></p></td>
<td><p>-5</p></td>
<td><p>HVAC temperature delta change in the setpoint</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_crac_setpoint</span></code></p></td>
<td><p>15</p></td>
<td><p>HVAC current temperature setpoint (C)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_cpu_workload_percent</span></code></p></td>
<td><p>0.69</p></td>
<td><p>Normalized shifted workload (%) that the dc agent is using (same as ls_shifted_workload)</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">dc_int_temperature</span></code></p></td>
<td><p>29.60</p></td>
<td><p>Room temperature (C)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">outside_temp</span></code></p></td>
<td><p>3.50</p></td>
<td><p>Outside temperature (C)</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">day_of_the_year</span></code></p></td>
<td><p>0</p></td>
<td><p>Day of the year</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">hour</span></code></p></td>
<td><p>0.25</p></td>
<td><p>Hour.Fraction of the hour.</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">day_workload</span></code></p></td>
<td><p>0</p></td>
<td><p>Total flexible workload at the start of the day</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">norm_CI</span></code></p></td>
<td></td>
<td><p>current normalized carbon intensity</p></td>
</tr>
</tbody>
</table>
</div>
<p>Depending on the objective and requirements, users can utilize a combination of these parameters to define their customized reward functions, or use one of already provided reward functions.</p>
<p>Some examples of custom rewards are listed below:</p>
<p><em>Example 1: Reward function based on power usage effectivness (PUE)</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">energy_PUE_reward</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates a reward value based on Power Usage Effectiveness (PUE).</span>

<span class="sd">    Args:</span>
<span class="sd">        params (dict): Dictionary containing parameters:</span>
<span class="sd">            total_energy_consumption (float): Total energy consumption of the data center.</span>
<span class="sd">            it_equipment_energy (float): Energy consumed by the IT equipment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Reward value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total_energy_consumption</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;total_energy_consumption&#39;</span><span class="p">]</span>
    <span class="n">it_equipment_energy</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;it_equipment_energy&#39;</span><span class="p">]</span>

    <span class="c1"># Calculate PUE</span>
    <span class="n">pue</span> <span class="o">=</span> <span class="n">total_energy_consumption</span> <span class="o">/</span> <span class="n">it_equipment_energy</span> <span class="k">if</span> <span class="n">it_equipment_energy</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>

    <span class="c1"># We aim to get PUE as close to 1 as possible, hence we take the absolute difference between PUE and 1</span>
    <span class="c1"># We use a negative sign since RL seeks to maximize reward, but we want to minimize PUE</span>
    <span class="n">reward</span> <span class="o">=</span> <span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">pue</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">reward</span>
</pre></div>
</div>
<p><em>How to use this custom reward function</em></p>
<p>To use this custom reward function, the reward function must be declared in the <code class="code docutils literal notranslate"><span class="pre">REWARD_METHOD_MAP</span></code>.
In this case, by default, the reward function is already declared as <code class="code docutils literal notranslate"><span class="pre">'energy_PUE_reward'</span> <span class="pre">:</span> <span class="pre">energy_PUE_reward,</span></code>.
Therefore, to use the function as a reward function of an agent (i.e., <code class="code docutils literal notranslate"><span class="pre">agent_dc</span></code>, the agent that modifies the HVAC setpoint), in the algorithm definition (i.e., <code class="code docutils literal notranslate"><span class="pre">train_ppo.py</span></code>),
the reward definition of the dc agent must be declared as <code class="code docutils literal notranslate"><span class="pre">dc_reward:energy_PUE_reward</span></code> within the <code class="code docutils literal notranslate"><span class="pre">env_config</span></code> dictionary.</p>
<p>The following piece of code show how to declare the <code class="code docutils literal notranslate"><span class="pre">'energy_PUE_reward'</span></code> as reward function for the DC agent:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CONFIG</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">PPOConfig</span><span class="p">()</span>
    <span class="o">.</span><span class="n">environment</span><span class="p">(</span>
        <span class="n">env</span><span class="o">=</span><span class="n">DCRL</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;EPLUS&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">DCRLeplus</span><span class="p">,</span>
        <span class="n">env_config</span><span class="o">=</span><span class="p">{</span>
            <span class="c1"># Agents active</span>
            <span class="s1">&#39;agents&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;agent_ls&#39;</span><span class="p">,</span> <span class="s1">&#39;agent_dc&#39;</span><span class="p">,</span> <span class="s1">&#39;agent_bat&#39;</span><span class="p">],</span>

            <span class="c1"># Other configurations ....</span>

            <span class="c1"># Specify reward methods</span>
            <span class="s1">&#39;ls_reward&#39;</span><span class="p">:</span> <span class="s1">&#39;default_ls_reward&#39;</span><span class="p">,</span>
            <span class="o">**</span><span class="s1">&#39;dc_reward&#39;</span><span class="p">:</span> <span class="s1">&#39;energy_PUE_reward&#39;</span><span class="p">,</span><span class="o">**</span>
            <span class="s1">&#39;bat_reward&#39;</span><span class="p">:</span> <span class="s1">&#39;default_bat_reward&#39;</span>
        <span class="p">}</span>
</pre></div>
</div>
<p><em>Example 2: Reward function based on time of use (ToU) of energy</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">tou_reward</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates a reward value based on the Time of Use (ToU) of energy.</span>

<span class="sd">    Args:</span>
<span class="sd">        params (dict): Dictionary containing parameters:</span>
<span class="sd">            energy_usage (float): The energy usage of the agent.</span>
<span class="sd">            hour (int): The current hour of the day (24-hour format).</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Reward value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># ToU dict: {Hour, price}</span>
    <span class="n">tou</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="mi">3</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="mi">4</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="mi">6</span><span class="p">:</span> <span class="mf">0.41</span><span class="p">,</span>
        <span class="mi">7</span><span class="p">:</span> <span class="mf">0.41</span><span class="p">,</span>
        <span class="mi">8</span><span class="p">:</span> <span class="mf">0.41</span><span class="p">,</span>
        <span class="mi">9</span><span class="p">:</span> <span class="mf">0.41</span><span class="p">,</span>
        <span class="mi">10</span><span class="p">:</span> <span class="mf">0.41</span><span class="p">,</span>
        <span class="mi">11</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span>
        <span class="mi">12</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span>
        <span class="mi">13</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span>
        <span class="mi">14</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span>
        <span class="mi">15</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span>
        <span class="mi">16</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="mi">17</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="mi">18</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="mi">19</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="mi">20</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="mi">21</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="mi">22</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="mi">23</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="c1"># Obtain the price of electricity at the current hour</span>
    <span class="n">current_price</span> <span class="o">=</span> <span class="n">tou</span><span class="p">[</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;hour&#39;</span><span class="p">]]</span>
    <span class="c1"># Obtain the energy usage</span>
    <span class="n">energy_usage</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;bat_total_energy_with_battery_KWh&#39;</span><span class="p">]</span>

    <span class="c1"># The reward is negative as the agent&#39;s objective is to minimize energy cost</span>
    <span class="n">tou_reward</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">energy_usage</span> <span class="o">*</span> <span class="n">current_price</span>

    <span class="k">return</span> <span class="n">tou_reward</span>
</pre></div>
</div>
<p><em>Example 3: Reward function based on the usage of renewable energy sources</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">renewable_energy_reward</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates a reward value based on the usage of renewable energy sources.</span>

<span class="sd">    Args:</span>
<span class="sd">        params (dict): Dictionary containing parameters:</span>
<span class="sd">            renewable_energy_ratio (float): Ratio of energy coming from renewable sources.</span>
<span class="sd">            total_energy_consumption (float): Total energy consumption of the data center.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Reward value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;renewable_energy_ratio&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;renewable_energy_ratio is not defined. This parameter should be included using some external dataset and added to the reward_info dictionary&#39;</span>
    <span class="n">renewable_energy_ratio</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;renewable_energy_ratio&#39;</span><span class="p">]</span> <span class="c1"># This parameter should be included using some external dataset</span>
    <span class="n">total_energy_consumption</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;bat_total_energy_with_battery_KWh&#39;</span><span class="p">]</span>
    <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c1"># factor to scale the weight of the renewable energy usage</span>

    <span class="c1"># Reward = maximize renewable energy usage - minimize total energy consumption</span>
    <span class="n">reward</span> <span class="o">=</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">renewable_energy_ratio</span>  <span class="o">-</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">total_energy_consumption</span>
    <span class="k">return</span> <span class="n">reward</span>
</pre></div>
</div>
<p><em>Example 4: Reward function based on energy efficiency</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">energy_efficiency_reward</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates a reward value based on energy efficiency.</span>

<span class="sd">    Args:</span>
<span class="sd">        params (dict): Dictionary containing parameters:</span>
<span class="sd">            ITE_load (float): The amount of energy spent on computation (useful work).</span>
<span class="sd">            total_energy_consumption (float): Total energy consumption of the data center.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Reward value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">it_equipment_power</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;dc_ITE_total_power_kW&#39;</span><span class="p">]</span>
    <span class="n">total_power_consumption</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;dc_total_power_kW&#39;</span><span class="p">]</span>

    <span class="n">reward</span> <span class="o">=</span> <span class="n">it_equipment_power</span> <span class="o">/</span> <span class="n">total_power_consumption</span>
    <span class="k">return</span> <span class="n">reward</span>
</pre></div>
</div>
<p><em>Example 5: Reward function based on the efficiency of cooling in the data center</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">temperature_efficiency_reward</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates a reward value based on the efficiency of cooling in the data center.</span>

<span class="sd">    Args:</span>
<span class="sd">        params (dict): Dictionary containing parameters:</span>
<span class="sd">            current_temperature (float): Current temperature in the data center.</span>
<span class="sd">            optimal_temperature_range (tuple): Tuple containing the minimum and maximum optimal temperatures for the data center.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Reward value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;optimal_temperature_range&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;optimal_temperature_range is not defined. This parameter should be added to the reward_info dictionary&#39;</span>
    <span class="n">current_temperature</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;dc_int_temperature&#39;</span><span class="p">]</span>
    <span class="n">optimal_temperature_range</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;optimal_temperature_range&#39;</span><span class="p">]</span>
    <span class="n">min_temp</span><span class="p">,</span> <span class="n">max_temp</span> <span class="o">=</span> <span class="n">optimal_temperature_range</span>

    <span class="k">if</span> <span class="n">min_temp</span> <span class="o">&lt;=</span> <span class="n">current_temperature</span> <span class="o">&lt;=</span> <span class="n">max_temp</span><span class="p">:</span>
        <span class="n">reward</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">current_temperature</span> <span class="o">&lt;</span> <span class="n">min_temp</span><span class="p">:</span>
            <span class="n">reward</span> <span class="o">=</span> <span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">current_temperature</span> <span class="o">-</span> <span class="n">min_temp</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">reward</span> <span class="o">=</span> <span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">current_temperature</span> <span class="o">-</span> <span class="n">max_temp</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">reward</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, HPE
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Reward function</a><ul>
<li><a class="reference internal" href="#independent-rewards">Independent rewards</a></li>
<li><a class="reference internal" href="#collaborative-rewards">Collaborative rewards</a></li>
<li><a class="reference internal" href="#custom-rewards">Custom rewards</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=d45e8c67"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>